## 2总体设计

### 2.1 用户需求规定

|            | 高价值   | 低价值   |
| ---------- | -------- | -------- |
| **高风险** | 首先处理 | 避免     |
| **低风险** | 其次处理 | 最后处理 |

​		

		考虑到实际情况的限制以下估算仅作为策略性指导，随着项目的进行可能会进行调整。


​		

| 用例编号 | 用例名称             | 风险 | 价值 | 优先级 |
| -------- | -------------------- | ---- | ---- | ------ |
| UC-TC-01 | 用户概览产业地图信息 | 中   | 高   | 高     |
| UC-TC-02 | 用户编辑图层         | 中   | 中   | 中     |
| UC-TC-03 | 用户检索数据         | 高   | 高   | 中     |
| UC-TC-04 | 用户筛选数据         | 高   | 中   | 低     |
| UC-TC-05 | 用户导出数据         | 中   | 中   | 中     |
| UC-TC-06 | 管理员注册           | 中   | 低   | 低     |
| UC-TC-07 | 管理员登录           | 高   | 低   | 低     |
| UC-TC-08 | 管理员增删改数据     | 高   | 高   | 高     |

​	  

### 2.2 其他需求规定

#### 性能需求

服务器性能要求能满足网友日常的访问需求，保持并发承受能力，在界面简洁美观的基础上，使网络延时短。

#### 输入输出需求

客户端通过网页形式向用户展现一个简洁友好的操作界面，用户可以点击超链接跳转界面，点击按钮提交表单。

服务器后台处理数据后显示在网页界面上。

#### 数据管理需求

安全：

数据库对参与数据库操作的数据都会预处理后再加入查询语句，避免通过网页 SQL 注入的方式获 取数据库信息或破坏数据库。数据库中密码通过不可逆加密加密存储，限制过短的密码，减低密泄露 的风险。

性能：

对于需要频繁访问数据库的操作，需要建立持久的数据库连接。

一般操作， 为减轻数据库负荷，在操作完成后断开连接。

#### 故障处理需求

软件开发团队提供系统维护支持，有完备的内部文档和外部文档。

系统报错信息可读性高。



### 2.3 运行环境

本网站主要服务于众多网友，需要保证至少 300 名网友同时取得服务的需求，包括数据存储能力和网络吞吐能力，保证账户一定的安全性。

软件运行环境：

| 项目             | 名称                        | 版本   |
| ---------------- | --------------------------- | ------ |
| 操作系统         | Windows7 及以上， Linux     |        |
| 网站服务器       | Nginx                       | 1.15.8 |
| 数据库服务器     | Linux socket                |        |
| 数据库服务器类型 | MySQL MongoDb Elasticsearch | 8.0    |
| 浏览器           | Chrome                      |        |

![img](file:////private/var/folders/cm/jz_1t2kd255cj4mxlnqs8jlh0000gn/T/com.kingsoft.wpsoffice.mac/wps-apple/ksohtml//wps1.png)硬件运行

 

| 项目              | 名称               |
| ----------------- | ------------------ |
| 操作系统          | CPU:CORE i5 及以上 |
| 内存： 2G 及以上  |                    |
| 硬盘：500G 及以上 |                    |
| 应用服务器        | 内存： 512M 及以上 |

| 数据库服务器邮件服务器文件服务器 | 硬盘：50G 及以上              |
| -------------------------------- | ----------------------------- |
| 通讯设备                         | 网线 ：具有良好的数据传输能力 |

 

### 2.4 基本设计概念和处理流程

服务器

以 Apache2 为服务器， Java 语言编写后端代码，数据库采用Mysql 和 MongoDb，搜索引擎使用  Elasticsearch。当用户通过浏览器使用网站系统时，浏览器接收用户的请求，并传送到服务器， 执行 相应的程序，通过搜索引擎 ES 查询相关内容，并且从数据库接口函数向数据库发送 SQL 查询语句，数 据库接收 SQL 查询语句后执行，返回查询结果， 处理查询结果后返回给前端，并显示在网站页面上。

客户端

浏览器采用常用的 IE, Chrome, FireFox 等。客户端在不频繁的操作页面时完成操作后断开与数 据库的连接以减轻服务器负荷；在操作频繁时保持连接以增加访问速度。

客户端动态页面：嵌入 Vue，动态网页以数据库技术为基础，能降低网站维护的工作量。

Vue：页面的各种文本框与按键操作能够完成，同时能实现无刷新页面的一些动画效果，包括下拉 菜单等。



 

 

![img](file:////private/var/folders/cm/jz_1t2kd255cj4mxlnqs8jlh0000gn/T/com.kingsoft.wpsoffice.mac/wps-apple/ksohtml//wps2.jpg) 

 

 

### 2.5 结构



 

系统模块架构图

 ![3.2.3 系统模块架构图](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/3.2.3 系统模块架构图.jpg)

 

系统模块设计

 ![Chapter 3.2.1软件需求规划说明书](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/Chapter 3.2.1软件需求规划说明书.png)





 

 

数据上下文

 ![3.2.5.drawio](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/3.2.5.drawio.png)

 

总体 E-R 图

 ![3.2.4ER图](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/3.2.4ER图.png)



 

 

### 2.6 用例 (用作 Test case)



#### 1 用户概览产业地图信息

##### 用例描述

<center>表 1-1：用户概览产业地图信息用例描述</center>

| 用例编号：UC-TC-01   | 用例名称：用户概览产业地图信息                               |
| -------------------- | ------------------------------------------------------------ |
| 创建人：沈韵沨       | 最后修改人：沈韵沨                                           |
| 创建日期：2022/10/21 | 最后修改日期：2022/10/23                                     |
| 角色：用户           | 主要参与者：用户                                             |
| 需求来源             | 用户调研                                                     |
| 描述                 | 用户点击显示按钮后，系统以地图形式可视化显示数据             |
| 前置条件             | 1.系统正常运行<br />2.用户可以正常打开相关界面               |
| 触发器               | 用户点击显示按钮                                             |
| 后置条件             | 前后端交互正常                                               |
| 输入信息             | 用户选定的源数据种类                                         |
| 主干过程             | 1.用户进入数据检索页<br />2.用户选定待显示的源数据<br />3.用户点击显示按钮 |
| 分支过程             | 无                                                           |
| 异常                 | 1.用户无法正常进入网站主页<br />2.用户选取源数据后系统无响应<br />3.用户取消数据图层显示后系统无响应<br />4.用户点击显示按钮后系统无响应<br />处理：用户进行刷新，若仍存在异常则联系管理员进行解决 |
| 假设                 | 无异常发生                                                   |
| 输入                 | 数据源信息：type                                             |
| 输出                 | 数据可视化结果界面                                           |
| 包括用例             | 无                                                           |
| 优先级               | 高                                                           |
| 使用频率             | 高                                                           |
| 备注与问题           | 无                                                           |

##### 时序图

![1-1](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/4.1-4.3/assets/1-1.png)

<center>图 1-1：用户概览产业地图信息时序图</center>

##### 活动图

![1-2](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/4.1-4.3/assets/1-2.png)

<center>图 1-2：用户概览产业地图信息活动图</center>

#### 2 用户编辑图层

##### 用例描述

<center>表 1-2：用户编辑图层用例描述</center>

| 用例编号：UC-TC-02   | 用例名称：用户编辑图层                                       |
| -------------------- | ------------------------------------------------------------ |
| 创建人：沈韵沨       | 最后修改人：沈韵沨                                           |
| 创建日期：2022/10/21 | 最后修改日期：2022/10/23                                     |
| 角色：用户           | 主要参与者：用户                                             |
| 需求来源             | 用户调研                                                     |
| 描述                 | 用户对待显示的数据源进行增加或删除操作                       |
| 前置条件             | 1.系统正常运行<br /> 2.用户可以正常打开相关界面              |
| 触发器               | 用户点击添加/删除按钮                                        |
| 后置条件             | 前后端交互正常                                               |
| 输入信息             | 收到影响的数据源种类、操作类型（添加或删除）                 |
| 主干过程             | 1.用户进入数据可视化结果页面<br />2.用户点击删除按钮         |
| 分支过程             | 1.用户进入数据可视化结果界面<br />2.用户点击添加按钮<br />3.用户选择添加的数据源 |
| 异常                 | 1.用户点击删除/添加页面后系统无响应<br />2.用户选取新增数据源后系统无响应<br />处理：用户进行刷新，若仍存在异常则联系管理员进行解决 |
| 假设                 | 无异常发生                                                   |
| 输入                 | 受影响的数据源信息：type，操作种类：operation                |
| 输出                 | 待显示的数据源列表                                           |
| 包括用例             | 无                                                           |
| 优先级               | 低                                                           |
| 使用频率             | 中                                                           |
| 备注与问题           | 无                                                           |

##### 时序图

![1-3](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/4.1-4.3/assets/1-3.png)

<center>图 1-3：用户编辑图层时序图</center>

##### 活动图

![1-4](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/4.1-4.3/assets/1-4.png)

<center>图 1-4：用户编辑图层活动图</center>

#### 3 用户检索数据

##### 用例描述

<center>表 1-3：用户检索数据用例描述</center>

| 用例编号：UC-TC-03   | 用例名称：用户检索数据                                       |
| -------------------- | ------------------------------------------------------------ |
| 创建人：沈韵沨       | 最后修改人：沈韵沨                                           |
| 创建日期：2022/10/21 | 最后修改日期：2022/10/23                                     |
| 角色：用户           | 主要参与者：用户                                             |
| 需求来源             | 用户调研                                                     |
| 描述                 | 用户通过分类目录索引选取待显示的数据源                       |
| 前置条件             | 1.系统正常运行<br /> 2.用户可以正常打开相关界面              |
| 触发器               | 用户点击检索按钮                                             |
| 后置条件             | 前后端交互正常                                               |
| 输入信息             | 无                                                           |
| 主干过程             | 1.用户进入网站主页<br />2.用户点击检索按钮                   |
| 分支过程             | 无                                                           |
| 异常                 | 1.用户无法正常进入网站主页<br />2.用户点击检索按钮后系统无响应<br />处理：用户进行刷新，若仍存在异常则联系管理员进行解决 |
| 假设                 | 无异常发生                                                   |
| 输入                 | 无                                                           |
| 输出                 | 所有数据源的分类目录索引界面                                 |
| 包括用例             | 无                                                           |
| 优先级               | 高                                                           |
| 使用频率             | 高                                                           |
| 备注与问题           | 无                                                           |

##### 时序图

![1-5](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/4.1-4.3/assets/1-5.png)

<center>图 1-5：用检索数据时序图</center>

##### 活动图

![1-6](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/4.1-4.3/assets/1-6.png)

<center>图 1-6：用户检索数据活动图</center> 



#### 4 用户筛选数据

##### 用例描述

<center>表 1-4：用户筛选数据用例描述</center>

| 用例编号     | UC-TC-04                                                     |
| ------------ | ------------------------------------------------------------ |
| 用例名称     | 用户筛选数据                                                 |
| 创建人       | 沈轩喆                                                       |
| 最后修改人   | 沈轩喆                                                       |
| 创建日期     | 2022/10/26                                                   |
| 最后修改日期 | 2022/10/26                                                   |
| 角色         | 用户                                                         |
| 需求来源     | 用户调研                                                     |
| 主要参与者   | 用户                                                         |
| 描述         | 用户点击筛选按钮，设置好筛选条件，系统显示筛选的结果         |
| 前置条件     | 1.  系统正常运行<br />2. 用户可正常打开相关界面              |
| 触发器       | 用户点击筛选按钮                                             |
| 后置条件     | 前后端交互正常                                               |
| 输入信息     | 用户设置的筛选条件                                           |
| 主干过程     | 1.  用户进入数据界面<br />2. 用户点击筛选按钮<br />3. 用户输入筛选条件 |
| 分支过程     | 无                                                           |
| 异常         | 1.  用户无法正常获取数据<br />2. 用户点击筛选按钮后无响应<br />3. 用户输入的筛选条件存在语法错误<br  />处理：用户刷新页面，重新输入筛选条件，若仍存在异常则联系管理员处理 |
| 假设         | 无异常发生                                                   |
| 输入         | 筛选条件：condition                                          |
| 输出         | 筛选结果                                                     |
| 包括用例     | 无                                                           |
| 优先级       | 中                                                           |
| 使用频率     | 高                                                           |
| 备注与问题   | 无                                                           |

##### 时序图

![4.1.4.1.drawio](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/4.1.4-4.1.5/4.1.4.1.drawio.png)

<center>图 1-7：用户筛选数据时序图</center>

##### 活动图

![4.1.4.2.drawio](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/4.1.4-4.1.5/4.1.4.2.drawio.png)

<center>图 1-8：用户筛选数据活动图</center>

#### 5 用户导出数据

##### 用例描述

<center>表 1-5：用户导出数据用例描述</center>

| 用例编号     | UC-TC-05                                                     |
| ------------ | ------------------------------------------------------------ |
| 用例名称     | 用户导出数据                                                 |
| 创建人       | 沈轩喆                                                       |
| 最后修改人   | 沈轩喆                                                       |
| 创建日期     | 2022/10/26                                                   |
| 最后修改日期 | 2022/10/26                                                   |
| 角色         | 用户                                                         |
| 需求来源     | 用户调研                                                     |
| 主要参与者   | 用户                                                         |
| 描述         | 用户点击导出按钮，系统生成选择的类型的文件                   |
| 前置条件     | 1.  系统正常运行<br />2. 用户可正常打开相关界面              |
| 触发器       | 用户点击导出按钮，选择导出的文件类型                         |
| 后置条件     | 前后端交互正常                                               |
| 输入信息     | 用户选择的文件类型                                           |
| 主干过程     | 1.  用户进入数据界面<br />2. 用户点击导出按钮<br />3. 用户选择导出的文件类型 |
| 分支过程     | 无                                                           |
| 异常         | 1.  用户无法正常获取数据<br />2. 用户点击导出按钮后无响应<br />3. 用户选择文件类型时无响应<br  />处理：用户刷新页面，若仍存在异常则联系管理员处理 |
| 假设         | 无异常发生                                                   |
| 输入         | 文件类型：outputType                                         |
| 输出         | 所选类型的文件                                               |
| 包括用例     | 无                                                           |
| 优先级       | 中                                                           |
| 使用频率     | 高                                                           |
| 备注与问题   | 无                                                           |

##### 时序图

![4.1.5.1.drawio](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/4.1.4-4.1.5/4.1.5.1.drawio.png)

<center>图 1-9：用户导出数据时序图</center>

##### 活动图

![4.1.5.2.drawio](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/4.1.4-4.1.5/4.1.5.2.drawio.png)

<center>图 1-10：用户导出数据活动图</center>

#### 6管理员注册

##### 用例描述

<center>表 2-1：管理员注册用例描述</center>

| 用例编号：UC-TC-06   | 用例名称：管理员注册                                         |
| -------------------- | ------------------------------------------------------------ |
| 创建人：应凌凯       | 最后修改人：应凌凯                                           |
| 创建日期：2022/10/22 | 最后修改日期：2022/10/27                                     |
| 角色：管理员         | 主要参与者：管理员                                           |
| 需求来源             | 管理员调研                                                   |
| 描述                 | 管理员点击注册按钮后，可以进行相关信息的注册                 |
| 前置条件             | 1.系统正常运行<br />2.管理员可以正常打开相关界面             |
| 触发器               | 管理员点击注册按钮                                           |
| 后置条件             | 前后端交互正常                                               |
| 输入信息             | 管理员自身基本信息以及设置的账号密码                         |
| 主干过程             | 1.管理员进入注册界面<br />2.管理员填写相关信息<br />3.管理员点击注册按钮 |
| 分支过程             | 无                                                           |
| 异常                 | 1.管理员无法正常进入注册页面<br />2.管理员填写完信息后系统无响应<br />3.管理员输入信息不合规定<br />4.管理员点击注册按钮后系统无响应 |
| 假设                 | 无异常发生                                                   |
| 输入                 | 数据源信息：type                                             |
| 输出                 | 数据可视化界面                                               |
| 包括用例             | 无                                                           |
| 优先级               | 高                                                           |
| 使用频率             | 高                                                           |
| 备注与问题           | 无                                                           |

##### 时序图

![2-1](/Users/apple/Desktop/1/大三上/软件工程管理/图片/2-1.png)

<center>图 2-1：管理员注册时序图</center>

##### 活动图

![1-2](/Users/apple/Desktop/1/大三上/软件工程管理/图片/2-2.png)

<center>图 2-2：管理员注册活动图</center>

#### 7管理员登陆

##### 用例描述

<center>表 2-2：管理员登陆用例描述</center>

| 用例编号：UC-TC-07   | 用例名称：管理员登陆                                         |
| -------------------- | ------------------------------------------------------------ |
| 创建人：应凌凯       | 最后修改人：应凌凯                                           |
| 创建日期：2022/10/22 | 最后修改日期：2022/10/27                                     |
| 角色：管理员         | 主要参与者：管理员                                           |
| 需求来源             | 管理员调研                                                   |
| 描述                 | 管理员点击登陆按钮后，可以进入管理页面                       |
| 前置条件             | 1.系统正常运行<br />2.管理员可以正常打开相关界面             |
| 触发器               | 管理员点击登陆按钮                                           |
| 后置条件             | 前后端交互正常                                               |
| 输入信息             | 管理员自己的账号密码                                         |
| 主干过程             | 1.管理员进入登陆界面<br />2.管理员填写自己的账号密码<br />3.管理员点击登陆按钮 |
| 分支过程             | 无                                                           |
| 异常                 | 1.管理员无法正常进入登陆页面<br />2.管理员填写完账号密码后系统无响应<br />3.管理员输入账号密码错误<br />4.管理员点击登陆按钮后系统无响应 |
| 假设                 | 无异常发生                                                   |
| 输入                 | 数据源信息：type                                             |
| 输出                 | 数据可视化界面                                               |
| 包括用例             | 无                                                           |
| 优先级               | 高                                                           |
| 使用频率             | 高                                                           |
| 备注与问题           | 无                                                           |

##### 时序图

![2-3](/Users/apple/Desktop/1/大三上/软件工程管理/图片/2-3.png)

<center>图 2-3：管理员登陆时序图</center>

##### 活动图

![2-4](/Users/apple/Desktop/1/大三上/软件工程管理/图片/2-4.png)

<center>图 2-4：管理员登陆活动图</center>

#### 8管理员增删改数据

##### 用例描述

<center>表 1-3：管理员增删改数据用例描述</center>

| 用例编号：UC-TC-08   | 用例名称：管理员增删改数据                                   |
| -------------------- | ------------------------------------------------------------ |
| 创建人：应凌凯       | 最后修改人：应凌凯                                           |
| 创建日期：2022/10/22 | 最后修改日期：2022/10/27                                     |
| 角色：管理员         | 主要参与者：管理员                                           |
| 需求来源             | 管理员调研                                                   |
| 描述                 | 管理员对待显示的数据源进行增加或删除操作                     |
| 前置条件             | 1.系统正常运行<br /> 2.管理员可以正常打开相关界面            |
| 触发器               | 管理员点击添加/删除按钮                                      |
| 后置条件             | 前后端交互正常                                               |
| 输入信息             | 收到影响的数据源种类、操作类型（添加或删除）                 |
| 主干过程             | 1.管理员进入数据可视化结果页面<br />2.管理员点击删除按钮     |
| 分支过程             | 1.管理员进入数据可视化结果界面<br />2.管理员点击添加按钮<br />3.管理员选择添加的数据源 |
| 异常                 | 1.管理员点击删除/添加数据后系统无响应                        |
| 假设                 | 无异常发生                                                   |
| 输入                 | 受影响的数据源信息：type，操作种类：operation                |
| 输出                 | 待显示的数据源列表                                           |
| 包括用例             | 无                                                           |
| 优先级               | 低                                                           |
| 使用频率             | 中                                                           |
| 备注与问题           | 无                                                           |

##### 时序图

![2-5](/Users/apple/Desktop/1/大三上/软件工程管理/图片/2-5.png)

<center>图 1-5：管理员增删改数据时序图</center>

##### 活动图

![2-6](/Users/apple/Desktop/1/大三上/软件工程管理/图片/2-6.png)

<center>图 1-6：管理员增删改数据活动图</center>

### 2.7 数据流图

用户的数据流图

 ![1](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/3.2.7数据流图/1.png)

 

第 0 层查询：

![2](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/3.2.7数据流图/2.png) 



第 0 层查询图片



 

![3](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/3.2.7数据流图/3.png) 

 

 

 

 

 

第 0 层点赞

 

![4](/Users/apple/Desktop/1/大三上/软件工程管理/11.25/3. 软件需求规格说明书/3.2.7数据流图/4.png) 



 

### 3.2.8 QFD

> 表项中“价值”、“未完成带来的损失”、“成本”、“风险”

| 用例编号 | 用例名称             | 价值 | 未完成带来的损失 | 成本 | 风险 | 优先级 |
| -------- | -------------------- | ---- | ---------------- | ---- | ---- | ------ |
| UC-TC-01 | 用户概览产业地图信息 | 10   | 10               | 8    | 5    | 高     |
| UC-TC-02 | 用户编辑图层         | 7    | 5                | 7    | 5    | 中     |
| UC-TC-03 | 用户检索数据         | 8    | 8                | 7    | 8    | 中     |
| UC-TC-04 | 用户筛选数据         | 7    | 7                | 7    | 8    | 低     |
| UC-TC-05 | 用户导出数据         | 6    | 5                | 5    | 5    | 中     |
| UC-TC-06 | 管理员注册           | 5    | 5                | 3    | 5    | 低     |
| UC-TC-07 | 管理员登陆           | 5    | 5                | 3    | 9    | 低     |
| UC-TC-08 | 管理员增删改数据     | 10   | 10               | 5    | 10   | 高     |



### 2.9 人工处理过程

在本系统的运行过程中，可能会出现一些系统无法自动解决的问题，需要人工处理介入来解决， 包括产业资料的删改、相关图片的爬取。

密码重置过程的人工处理：

当管理员忘记密码且未填写邮箱或忘记所填写的邮箱时，只能通过进入数据库进行处理。

 

